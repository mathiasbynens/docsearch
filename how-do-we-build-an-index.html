<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie-edge"><title>How do we build a DocSearch index?</title><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The easiest way to add search to your documentation"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@Algolia"><meta name="twitter:creator" content="@Algolia"><meta property="og:url" content="https://community.algolia.com/docsearch"><meta property="og:title" content="How do we build a DocSearch index?"><meta property="og:description" content="The easiest way to add search to your documentation"><meta property="og:image" content="https://community.algolia.com/docsearch/assets/og_image.png"><link rel="shortcut icon" href="./favicon.ico"><link rel="icon" type="image/x-icon" sizes="16x16 32x32" href="favicon.ico"><link href="https://fonts.googleapis.com/css?family=Hind:400,600|Poppins:700" rel="stylesheet"><link type="text/css" rel="stylesheet" href="./style.css"><link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"><link type="text/css" rel="stylesheet" href="https://unpkg.com/@glidejs/glide@3.2.3/dist/css/glide.core.min.css"><body class="hind text-telluric bg-white"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N8JP8G" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="header fixed pin-t w-100 h-3 z-5 bg-white-pure"><div class="max-w-xl m-auto h-100 flex flrnw"><div class="hidden sm_flex fln flcnw flc"><a class="cursor-pointer text-0 pl-2" href="https://www.algolia.com/" target="_blank"><img class="h-1 sm_h-1x" src="assets/algolia-logo.svg" alt="Algolia"></a></div><div class="hidden sm_flex fln flrnw flc"><div class="w-1 h-1 sm_w-1x sm_h-1x text-telluric fill-current"><svg height="100%" width="100%" viewBox="0 0 18 35" xmlns="http://www.w3.org/2000/svg">
  <path d="M1.8537 34.7643l15.5597-17.268L1.8537 0H0l15.5597 17.4964L0 34.7644z" fill-rule="evenodd"></path>
</svg>
</div></div><div class="hidden lg_flex custom-community-link fln flcnw flc px-0x relative"><a class="cursor-pointer text-0" href="https://community.algolia.com/" target="_blank"><img class="h-1 sm_h-1x lg_h-2" src="assets/community/community-logo.svg" alt="Algolia Community"></a><div class="custom-community-projects hidden sm_block absolute z-5 pin-t mt-3 ml-3 border border-proton rounded-auto bg-white-pure shadow-1"><div class="flex flrw pt-0x"><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/talksearch/"><div class="fln bg-blue rounded-auto w-2x h-2x"><img class="w-100" src="assets/community/talksearch-icon.svg" alt="TalkSearch"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">TalkSearch</div></a><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/jekyll-algolia/"><div class="fln bg-blue rounded-auto w-2x h-2x"><img class="w-100" src="assets/community/jekyll-icon.svg" alt="Jekyll"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">Jekyll</div></a><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/instantsearch.js/"><div class="fln bg-blue rounded-auto w-2x h-2x"><img class="w-100" src="assets/community/instantsearch-icon.svg" alt="InstantSearch"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">InstantSearch</div></a><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/react-instantsearch/"><div class="fln bg-blue rounded-auto w-2x h-2x"><img class="w-100" src="assets/community/react-icon.svg" alt="React InstantSearch"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">React InstantSearch</div></a><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/vue-instantsearch/"><div class="fln bg-blue rounded-auto w-2x h-2x"><img class="w-100" src="assets/community/vue-icon.svg" alt="Vue InstantSearch"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">Vue InstantSearch</div></a><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/angular-instantsearch/"><div class="fln bg-blue rounded-auto w-2x h-2x flex flrnw flc"><img class="w-80" src="assets/community/angular-icon.svg" alt="Angular InstantSearch"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">Angular InstantSearch</div></a><a class="fla flex flrnw p-0x flc text-2 text-solstice bold bg-moon rounded-auto py-1" href="https://discourse.algolia.com/">Community Forum</a></div></div></div><div class="hidden lg_flex fln flrnw flc"><div class="w-1 h-1 sm_w-1x sm_h-1x text-telluric fill-current"><svg height="100%" width="100%" viewBox="0 0 18 35" xmlns="http://www.w3.org/2000/svg">
  <path d="M1.8537 34.7643l15.5597-17.268L1.8537 0H0l15.5597 17.4964L0 34.7644z" fill-rule="evenodd"></path>
</svg>
</div></div><div class="flex fln flrnw flc pl-1 sm_pl-0"><a class="cursor-pointer uppercase tracking-poppins poppins text-solstice hover_text-nebula hover_no-underline" href="./"><span class="hidden sm_block ml-0x">DocSearch</span><img class="align-text-bottom h-100 sm_hidden ml-1" src="assets/docsearch-mark.svg" width="40" alt="DocSearch logo"></a></div><div class="flex fla flrnw flrcv flrar ml-2"><div class="w-100 flrnw flex flrar"><div class="custom-search-wrapper fln h-60 w-100 rounded-auto relative"><label class="absolute pin-left z-1 w-1 h-100 ml-05 text-solstice fill-current cursor-pointer" for="docsearch"><svg height="100%" viewBox="0 0 15 15" width="100%" xmlns="http://www.w3.org/2000/svg">
  <path d="M10.052 10.88c-1.1.91-2.483 1.406-3.91 1.403C2.75 12.283 0 9.533 0 6.14 0 2.75 2.75 0 6.142 0c3.392 0 6.14 2.75 6.14 6.142 0 1.485-.526 2.847-1.403 3.91l3.95 3.95c.227.227.228.596-.002.826-.228.227-.597.228-.826 0l-3.95-3.95zm-3.91.234c2.745 0 4.972-2.227 4.972-4.972 0-2.747-2.227-4.972-4.972-4.972-2.747 0-4.972 2.225-4.972 4.972 0 2.745 2.225 4.972 4.972 4.972z" fill-rule="evenodd"></path>
</svg>
</label><input class="custom-search-input w-100 h-2x leading-h-2x outline-none text-solstice pl-2 rounded-auto bg-moon focus_bg-moon--1" id="docsearch" placeholder="Search the docs..."></div></div></div><div class="hidden md_flex justify-start items-center mx-1"><a class="h-1x w-1x text-solstice fill-current items-center hover_text-grey-darker mr-1" href="https://github.com/algolia/docsearch" target="_blank"><svg viewBox="0 0 40 39" xmlns="http://www.w3.org/2000/svg">
  <path d="M19.998 0C8.955 0 0 8.954 0 20c0 8.837 5.73 16.333 13.678 18.977 1 .184 1.365-.433 1.365-.964 0-.475-.017-1.732-.027-3.4C9.453 35.82 8.28 31.93 8.28 31.93c-.91-2.31-2.222-2.925-2.222-2.925-1.816-1.24.137-1.215.137-1.215 2.008.14 3.064 2.06 3.064 2.06 1.783 3.057 4.68 2.174 5.82 1.662.18-1.29.698-2.173 1.27-2.673-4.442-.505-9.11-2.222-9.11-9.885 0-2.183.78-3.97 2.058-5.367-.206-.506-.893-2.54.196-5.293 0 0 1.68-.538 5.5 2.05A19.156 19.156 0 0 1 20 9.67c1.7.01 3.41.23 5.008.675 3.818-2.588 5.494-2.05 5.494-2.05 1.09 2.753.405 4.787.2 5.293 1.282 1.397 2.055 3.184 2.055 5.367 0 7.683-4.676 9.374-9.13 9.868.716.618 1.356 1.838 1.356 3.703 0 2.675-.025 4.832-.025 5.487 0 .536.36 1.158 1.376.963C34.274 36.326 40 28.836 40 20 40 8.955 31.045 0 19.998 0" />
</svg>
</a></div><div class="md_hidden flex justify-start items-center mx-2"><button class="custom-toggle-nav text-solstice items-center hover_text-grey-darker focus_outline-none"><svg class="align-text-bottom navigation-open h-1x w-1x fill-current" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg><svg class="align-text-bottom navigation-close hidden h-1x w-1x fill-current" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"></path></svg></button></div></div></div><div class="mt-3"><div class="bgtb-moon-white-pure relative"><div class="md_flex max-w-lg m-auto"><div class="navigation-sidebar sticky pin-t top-3 h-100vh-3 overflow-y-auto hidden md_block bg-white pl-1"><!-- Adding subsections from markdown--><div class="pt-2 w-5 m-auto sm_flex sm_w-90 md_block md_w-100"><div class="flcnw flspa sm_flex-auto sm_w-33 sm_p-1 md_w-100 md_p-0"><div class="category text-nebula poppins uppercase mb-05x text-1x">Getting Started</div><ul class="list-reset mb-2"><li><a class="block py-0x text-solstice" href="what-is-docsearch.html">What is DocSearch?</a></li><li><a class="block py-0x text-solstice" href="how-does-it-work.html">How Does It Work?</a></li><li><a class="block py-0x text-solstice" href="who-can-apply.html">Who Can Apply?</a></li><li><a class="block py-0x text-solstice" href="apply.html">Apply Now!</a></li></ul></div><div class="flcnw flspa sm_flex-auto sm_w-33 sm_p-1 md_w-100 md_p-0"><div class="category text-nebula poppins uppercase mb-05x text-1x">Adding DocSearch To Your UI</div><ul class="list-reset mb-2"><li><a class="block py-0x text-solstice" href="dropdown.html">Dropdown UI Overview</a></li><li><a class="block py-0x text-solstice" href="styling.html">Styling</a></li><li><a class="block py-0x text-solstice" href="behavior.html">Behavior</a></li></ul></div><div class="flcnw flspa sm_flex-auto sm_w-33 sm_p-1 md_w-100 md_p-0"><div class="category text-nebula poppins uppercase mb-05x text-1x">Tips, FAQ, Misc</div><ul class="list-reset mb-2"><li><a class="block py-0x text-solstice" href="recommended-configuration.html">Recommended configuration</a></li><li><a class="block py-0x text-solstice" href="tips.html">Tips</a></li><li><a class="block py-0x text-solstice" href="faq.html">FAQ</a></li><li><a class="block py-0x text-solstice" href="integrations.html">Website Generators</a></li></ul></div><div class="flcnw flspa sm_flex-auto sm_w-33 sm_p-1 md_w-100 md_p-0"><div class="category text-nebula poppins uppercase mb-05x text-1x">Let’s Get Technical</div><ul class="list-reset mb-2"><li><a class="block py-0x text-solstice" href="crawler-overview.html">DocSearch Technical Overview (the Crawler)</a></li><li><a class="block py-0x text-solstice" href="inside-the-engine.html">Inside The Engine</a></li><li><a class="block py-0x text-solstice" href="config-file.html">Config Files</a></li><li><a class="block py-0x text-solstice" href="css-helper.html">CSS Helper</a></li><li><a class="block py-0x current-page text-nebula" href="how-do-we-build-an-index.html">Build An Index</a></li><li><a class="block py-0x text-solstice" href="run-your-own.html">Run Your Own</a></li></ul></div></div></div><div class="documentation-content text-2 pt-2 pb-1 px-2 w_100 md_w-75"><div class="md_hidden mb-1"><a href="https://community.algolia.com/docsearch">DocSearch</a><span>&nbsp;>&nbsp;</span><a href="https://community.algolia.com/docsearch/what-is-docsearch.html">Documentation</a></div><h1 class="custom-main-title text-5 lg_text-7 uppercase tracking-poppins text-solstice bold mb-2">How do we build a DocSearch index?</h1><p>In this section you will learn how we build a DocSearch index from your page.</p>
<h3 id="everything-starts-from-your-page">Everything starts from your page <a class="anchor" href="#everything-starts-from-your-page" aria-hidden="true"></a></h3>
<p class="mt-2"><img src="./assets/build_index/how_do_we_build_docsearch_index_1.png" alt="1st step"></p>
<p><em>Note: We would rather avoid useless js rendering. All useful information should
be available without any client-side rendering. You can use <code>curl</code> in order to
have a better idea of how it would look without any client-side rendering.</em></p>
<h3 id="we-extract-the-payload-thanks-to-your-set-of-selectors">We extract the payload thanks to your set of <code>selectors</code> <a class="anchor" href="#we-extract-the-payload-thanks-to-your-set-of-selectors" aria-hidden="true"></a></h3>
<p class="mt-2"><img src="./assets/build_index/how_do_we_build_docsearch_index_2.png" alt="2nd step"></p>
<p>We will focus on the highlighted information depending on your selectors.</p>
<h3 id="we-iterate-through-the-html-flow-and-build-the-payload">We iterate through the HTML flow and build the payload <a class="anchor" href="#we-iterate-through-the-html-flow-and-build-the-payload" aria-hidden="true"></a></h3>
<p class="mt-2"><img src="./assets/build_index/how_do_we_build_docsearch_index_3.png" alt="3rd step"></p>
<p>This payload will be the only data extracted from your page.</p>
<h3 id="we-iterate-through-the-payload-and-start-pushing-records">We iterate through the payload and start pushing records <a class="anchor" href="#we-iterate-through-the-payload-and-start-pushing-records" aria-hidden="true"></a></h3>
<p class="mt-2"><img src="./assets/build_index/how_do_we_build_docsearch_index_4.png" alt="4th step"></p>
<p>We index the temporary record when we add an element to it (if
<code>min_indexed_level</code> is set to <code>0</code>)</p>
<h3 id="we-pile-up-the-elements-based-on-the-current-temporary-record">We pile up the elements based on the current temporary record <a class="anchor" href="#we-pile-up-the-elements-based-on-the-current-temporary-record" aria-hidden="true"></a></h3>
<p class="mt-2"><img src="./assets/build_index/how_do_we_build_docsearch_index_5.png" alt="5th step"></p>
<p>Base on the position within the flow, we nest elements as much as possible to
keep the contextual relevancy.</p>
<h3 id="we-iterate-until-we-match-a-text-element">We iterate until we match a <code>text</code> element <a class="anchor" href="#we-iterate-until-we-match-a-text-element" aria-hidden="true"></a></h3>
<p class="mt-2"><img src="./assets/build_index/how_do_we_build_docsearch_index_6.png" alt="6th step"></p>
<h3 id="we-override-the-text-element-when-we-find-a-newer-one">We override the text element when we find a newer one <a class="anchor" href="#we-override-the-text-element-when-we-find-a-newer-one" aria-hidden="true"></a></h3>
<p class="mt-2"><img src="./assets/build_index/how_do_we_build_docsearch_index_7.png" alt="7th step"></p>
<h3 id="we-remove-the-stashed%2C-deeper-elements-when-we-add-a-higher-level">We remove the stashed, deeper elements when we add a higher level <a class="anchor" href="#we-remove-the-stashed%2C-deeper-elements-when-we-add-a-higher-level" aria-hidden="true"></a></h3>
<p class="mt-2"><img src="./assets/build_index/how_do_we_build_docsearch_index_8.png" alt="8th step"></p>
<p>Contextual information and hierarchy must be updated once we encounter a new
level since it highlights a new sub-section not related to the previous one.</p>
<p>If you need any further information, please <a href="mailto:docsearch@algolia.com">do not hesitate, send us your
feedback</a>.</p>
<!-- Include the apply form--><div class="my-3 italic"><a href="https://github.com/algolia/docsearch/tree/master/docs/src/how-do-we-build-an-index.md">Edit this page</a></div></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="js/main.js"></script><script src="js/docs.js"></script></body><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-N8JP8G');</script></head></html>